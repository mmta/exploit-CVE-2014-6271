#!/bin/bash

# refresh index.html
cp -r /root/index.html /var/www/html/ && \
# weaken the perm to allow file addition
chown -R www-data:www-data /var/www/html

# https://forums.docker.com/t/httpd-already-running/33397
rm -f /var/run/apache2/apache2.pid

# fake tty hack to avoid SIGWINCH suicide, so that we can use docker run -it and still CTRL-C to stop apache2ctl
# https://stackoverflow.com/questions/32910661/pretend-to-be-a-tty-in-bash-for-any-command?newsletter=1&nlcode=138806%7c1c8b#comment53672609_32910661

0<&- script -qefc "/usr/sbin/apache2ctl -D FOREGROUND -e debug" /dev/null | cat 
